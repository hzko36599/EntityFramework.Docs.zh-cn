---
title: 恢复到 Entity Framework Designer 中的 ObjectContext EF6
description: 恢复到实体框架6的 Entity Framework Designer 中的 ObjectContext
author: ajcvickers
ms.date: 10/23/2016
uid: ef6/modeling/designer/codegen/legacy-objectcontext
ms.openlocfilehash: 563c1defd12a72836a158d9c2398202c421dd6f3
ms.sourcegitcommit: 0a25c03fa65ae6e0e0e3f66bac48d59eceb96a5a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/14/2020
ms.locfileid: "92064934"
---
# <a name="reverting-to-objectcontext-in-entity-framework-designer"></a><span data-ttu-id="6de76-103">恢复到 Entity Framework Designer 中的 ObjectContext</span><span class="sxs-lookup"><span data-stu-id="6de76-103">Reverting to ObjectContext in Entity Framework Designer</span></span>
<span data-ttu-id="6de76-104">使用早期版本的实体框架使用 EF 设计器创建的模型将生成派生自 EntityObject 的 ObjectContext 和实体类的上下文。</span><span class="sxs-lookup"><span data-stu-id="6de76-104">With previous version of Entity Framework a model created with the EF Designer would generate a context that derived from ObjectContext and entity classes that derived from EntityObject.</span></span>

<span data-ttu-id="6de76-105">从 EF 4.1 开始，我们建议换到代码生成模板，该模板生成派生自 DbContext 和 POCO 实体类的上下文。</span><span class="sxs-lookup"><span data-stu-id="6de76-105">Starting with EF4.1 we recommended swapping to a code generation template that generates a context deriving from DbContext and POCO entity classes.</span></span>

<span data-ttu-id="6de76-106">在 Visual Studio 2012 中，会为使用 EF 设计器创建的所有新模型获取默认生成的 DbContext 代码。</span><span class="sxs-lookup"><span data-stu-id="6de76-106">In Visual Studio 2012 you get DbContext code generated by default for all new models created with the EF Designer.</span></span> <span data-ttu-id="6de76-107">现有模型将继续生成基于 ObjectContext 的代码，除非你决定要切换到基于 DbContext 的代码生成器。</span><span class="sxs-lookup"><span data-stu-id="6de76-107">Existing models will continue to generate ObjectContext based code unless you decide to swap to the DbContext based code generator.</span></span>

## <a name="reverting-back-to-objectcontext-code-generation"></a><span data-ttu-id="6de76-108">恢复到 ObjectContext 代码生成</span><span class="sxs-lookup"><span data-stu-id="6de76-108">Reverting Back to ObjectContext Code Generation</span></span>

### <a name="1-disable-dbcontext-code-generation"></a><span data-ttu-id="6de76-109">1. 禁用 DbContext 代码生成</span><span class="sxs-lookup"><span data-stu-id="6de76-109">1. Disable DbContext Code Generation</span></span>

<span data-ttu-id="6de76-110">派生的 DbContext 和 POCO 类的生成由项目中的两个 tt 文件处理，如果在 "解决方案资源管理器" 中展开 .edmx 文件，则会看到这些文件。</span><span class="sxs-lookup"><span data-stu-id="6de76-110">Generation of the derived DbContext and POCO classes is handled by two .tt files in you project, if you expand the .edmx file in solution explorer you will see these files.</span></span> <span data-ttu-id="6de76-111">从项目中删除这两个文件。</span><span class="sxs-lookup"><span data-stu-id="6de76-111">Delete both of these files from your project.</span></span>

![代码生成文件](~/ef6/media/codegenfiles.png)

<span data-ttu-id="6de76-113">如果你使用的是 VB.NET，则需要选择 " **显示所有文件** " 按钮以查看嵌套的文件。</span><span class="sxs-lookup"><span data-stu-id="6de76-113">If you are using VB.NET you will need to select the **Show All Files** button to see the nested files.</span></span>

![显示所有文件](~/ef6/media/showallfiles.png)

### <a name="2-re-enable-objectcontext-code-generation"></a><span data-ttu-id="6de76-115">2. Re-Enable ObjectContext 代码生成</span><span class="sxs-lookup"><span data-stu-id="6de76-115">2. Re-Enable ObjectContext Code Generation</span></span>

<span data-ttu-id="6de76-116">在 EF 设计器中打开模型，右键单击设计图面的空白部分，然后选择 " **属性**"。</span><span class="sxs-lookup"><span data-stu-id="6de76-116">Open you model in the EF Designer, right-click on a blank section of the design surface and select **Properties**.</span></span>

<span data-ttu-id="6de76-117">在属性窗口将 **代码生成策略** 从 **None** 更改为 **默认值**。</span><span class="sxs-lookup"><span data-stu-id="6de76-117">In the Properties window change the **Code Generation Strategy** from **None** to **Default**.</span></span>

![代码生成策略](~/ef6/media/codegenstrategy.png)
